# Islamic Manuscript Decoration Analysis

An AI-powered research pipeline for discovering, cataloguing, and analyzing decorative programs in Islamic manuscripts — with a focus on Ottoman, Timurid, Safavid, and Mamluk traditions.

The project uses [Claude Code](https://claude.ai/code) with seven specialized AI agents to automate manuscript discovery in the YEK Turkish manuscript portal (~600,000 records), perform visual confirmation of catalogue claims, and produce structured catalog records with standardized multilingual terminology.

## Research Focus

- **Decorated paper**: gold-sprinkled (*zerefşân*), silver-sprinkled (*sim efşan*), marbled (*ebrulu*), dyed (*mülevven/boyalı*)
- **Margin decoration**: *halkâr* (shaded gold floral painting), illuminated borders (*kenar tezhibi*), marginal drawings (*teşʿîr*)
- **Framing systems**: gold ruling (*cetvel*), chain borders (*zencirek*)
- **Corpus**: 24 manuscripts catalogued so far, drawn from Nuruosmaniye, Süleymaniye, Yusuf Ağa, Ragıp Paşa, Millî Kütüphane, and other Turkish collections

## Pipeline Architecture

Four analysis pipelines, all orchestrated through Claude Code:

```text
Image analysis:
  Folio image(s) → motif-classifier → metadata-generator → qc-reviewer

YEK catalogue search:
  Search request → yek-search → yek-search (filter FPs) → qc-reviewer
                → visual-confirmation → motif-classifier → metadata-generator → qc-reviewer

Comparative analysis:
  Research question → Explore → comparative-analyst → metadata-generator

Material/codicological questions:
  Physical question → codicology-agent → metadata-generator (if record needed)
```

## Agents

| Agent | Model | Role |
| --- | --- | --- |
| `motif-classifier` | Opus | Visual analysis of folio images; identifies decorative elements with standardized terminology |
| `codicology-agent` | Sonnet | Physical/material analysis: paper, binding, ruling, condition |
| `metadata-generator` | Sonnet | Produces catalog records with bibliography; exports to JSON, TEI-XML, IIIF |
| `comparative-analyst` | Opus | Cross-manuscript stylistic comparison for dating, attribution, and provenance |
| `yek-search` | Opus | Automated search of the YEK portal via Playwright MCP; handles false-positive filtering |
| `visual-confirmation` | Opus | Navigates YEK viewer, extracts IIIF image IDs, takes screenshots, verifies catalogue claims |
| `qc-reviewer` | Opus | Quality-control gate before any record is saved to `catalog/` |

## Project Structure

```text
.
├── .claude/
│   ├── agents/          # 7 custom agent definition files
│   └── skills/          # Shared knowledge bases (terminology, schemas, YEK playbook)
├── catalog/
│   └── searches/        # YEK search results + manuscript registry + visual confirmation records
├── corpus/
│   ├── yek_screenshots/            # Folio screenshots (gitignored — see below)
│   └── visual_confirmation_batch1/ # Batch 1 confirmation screenshots (gitignored)
├── output/              # Generated reports and exports (empty until pipeline runs)
├── references/          # Bibliography database and PDFs
├── CLAUDE.md            # Full workflow documentation and agent delegation rules
├── MEMORY.md            # Live project state (gitignored — generated locally by agents)
├── .env.example         # Credential template (copy to .env and fill in)
└── LICENSE              # CC-BY-4.0
```

### Corpus images

Folio screenshots are excluded from this repository (they are ~45 MB and grow with each search batch). They are captured automatically during `visual-confirmation` agent runs and can be regenerated by re-running the agent against the YEK portal.

## Setup

### Prerequisites

- [Claude Code CLI](https://claude.ai/code) (latest version)
- [Playwright MCP server](https://github.com/microsoft/playwright-mcp) configured in Claude Code
- A free account on [portal.yek.gov.tr](https://portal.yek.gov.tr) (required for YEK searches)

### Installation

1. Clone the repository:

   ```bash
   git clone https://github.com/{username}/islamic-manuscript-decoration-analysis.git
   cd islamic-manuscript-decoration-analysis
   ```

2. Configure credentials:

   ```bash
   cp .env.example .env
   # Edit .env and add your YEK portal username and password
   ```

3. Open Claude Code in the project directory:

   ```bash
   claude
   ```

4. Verify all seven agents loaded:

   ```text
   /agents
   ```

   You should see `motif-classifier`, `codicology-agent`, `metadata-generator`, `comparative-analyst`, `yek-search`, `visual-confirmation`, and `qc-reviewer` alongside the built-in agents.

5. Check project state: Claude will automatically read `MEMORY.md` to load current search history and pipeline status.

## Usage Examples

### Analyze a folio image

```text
Analyze this manuscript folio for its decorative program.
[attach image]
```

Claude chains: `motif-classifier` → `metadata-generator` → `qc-reviewer`

### Search the YEK portal for decorated manuscripts

```text
Search the YEK database for manuscripts with halkâr margin decoration.
```

Claude runs: `yek-search` (search + FP filtering) → `qc-reviewer` → `visual-confirmation`

### Compare two manuscripts

```text
Compare the illumination style of these two folios and suggest whether they share a workshop origin.
[attach images]
```

Claude uses: `comparative-analyst` (with `motif-classifier` for each image)

### Export a catalog record

```text
Generate a TEI-XML record for the analysis we just completed.
```

Claude uses: `metadata-generator` in TEI mode

### Continue a previous search session

```text
Continue the YEK search from where we left off — we finished Batch 1 (gold-sprinkled). Start Batch 2 (gold-worked: zerkâri, zer-endûd).
```

Claude reads `MEMORY.md` for current state and resumes the search plan.

## Current Research State

`MEMORY.md` is a local file (gitignored) that all agents maintain automatically. It tracks:

- Search history (which YEK term × field combinations are done)
- Catalogued manuscripts and their pipeline stages
- Known false positive patterns
- Terminology discoveries
- Follow-up items (manuscripts requiring physical examination)

**As of 2026-02-24:** Batch 1 (gold-sprinkled family, 19 searches) complete. 23 active manuscripts in corpus (24 found, 2 removed as false positives). 14 ready for motif-classifier pipeline; 8 Ali Emiri Belge documents without digitized images.

## Terminology

All agents use correct Arabic, Persian, and Ottoman Turkish technical terms following [IJMES transliteration conventions](https://www.cambridge.org/core/journals/international-journal-of-middle-east-studies/information/author-resources/ijmes-translation-and-transliteration-guide).

The full terminology reference — including spelling variants, multilingual equivalents, and Munsell-based color descriptions — is in [`.claude/skills/terminology-reference.md`](.claude/skills/terminology-reference.md).

Key classification systems:

- **Motif types**: Based on Déroche (2005) with Ottoman extensions
- **Color nomenclature**: Munsell-based supplemented with historical pigment names
- **Layout types**: Following Gacek (2009)

## Data Sources

Manuscript records are drawn from [portal.yek.gov.tr](https://portal.yek.gov.tr) (Yazma Eserler Kurumu / Turkish Foundation for Manuscripts), which provides access to ~600,000 records across 252 collections in Turkey. The YEK portal requires free registration.

## License

This project is licensed under the [Creative Commons Attribution 4.0 International License](LICENSE) (CC-BY-4.0). You are free to share and adapt the material for any purpose, provided you give appropriate credit.

SPDX-License-Identifier: CC-BY-4.0
